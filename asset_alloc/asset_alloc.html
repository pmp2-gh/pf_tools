<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>üìä Portfolio Efficient Frontier, Rolling Analysis &amp; Rebalancing Policy</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
  </style>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
  type="text/javascript"></script>
</head>
<body>
<header id="title-block-header">
<h1 class="title">üìä Portfolio Efficient Frontier, Rolling Analysis
&amp; Rebalancing Policy</h1>
</header>
<h2 id="overview">1. Overview</h2>
<p>This document summarizes the <strong>theory, equations, and practical
procedures</strong> for building and maintaining a diversified portfolio
using <strong>mean‚Äìvariance optimization</strong>, <strong>efficient
frontier analysis</strong>, and <strong>rolling 10-year
evaluation</strong> to inform <strong>strategic asset
allocation</strong> and <strong>rebalancing decisions</strong>.</p>
<p>We consider four core assets:</p>
<ul>
<li>U.S. Total Stock Market<br />
</li>
<li>International Total Stock Market<br />
</li>
<li>U.S. Total Bond Market<br />
</li>
<li>International Total Bond Market (synthetic or proxy)</li>
</ul>
<hr />
<h2 id="modern-portfolio-theory-markowitz-1952">2. Modern Portfolio
Theory (Markowitz 1952)</h2>
<p>Given a set of assets with expected returns and covariances, a
portfolio‚Äôs performance is described by two key quantities.</p>
<h3 id="expected-return">2.1 Expected Return</h3>
<p>The expected portfolio return is</p>
<p><span class="math display">\[
E[R_p] = \mu_p = \sum_{i=1}^{n} w_i \mu_i = \mathbf{w}^\top
\boldsymbol{\mu}
\]</span></p>
<p>where</p>
<ul>
<li><span class="math inline">\(\mathbf{w} = [w_1, w_2, \dots,
w_n]^\top\)</span> are asset weights (summing to 1),</li>
<li><span class="math inline">\(\boldsymbol{\mu} = [\mu_1, \mu_2, \dots,
\mu_n]^\top\)</span> are expected returns.</li>
</ul>
<h3 id="portfolio-variance">2.2 Portfolio Variance</h3>
<p>The portfolio variance (risk) is</p>
<p><span class="math display">\[
\sigma_p^2 = \mathbf{w}^\top \Sigma \mathbf{w}
\]</span></p>
<p>where</p>
<ul>
<li><span class="math inline">\(\Sigma\)</span> is the covariance matrix
of asset returns,</li>
<li><span class="math inline">\(\sigma_p = \sqrt{\sigma_p^2}\)</span> is
the portfolio volatility.</li>
</ul>
<hr />
<h2 id="efficient-frontier">3. Efficient Frontier</h2>
<p>The <strong>efficient frontier</strong> is the set of portfolios that
are <strong>not dominated</strong> in risk‚Äìreturn space: for each point
on the frontier, there is no other portfolio with the <strong>same
return and lower volatility</strong> or <strong>same volatility and
higher return</strong>.</p>
<h3 id="analytical-form-unconstrained-case">3.1 Analytical Form
(Unconstrained Case)</h3>
<p>If shorting and any weights are allowed, the Markowitz problem</p>
<ul>
<li>minimize <span class="math inline">\(\mathbf{w}^\top \Sigma
\mathbf{w}\)</span></li>
<li>subject to <span class="math inline">\(\mathbf{w}^\top
\boldsymbol{\mu} = r\)</span> and <span
class="math inline">\(\mathbf{w}^\top \mathbf{1} = 1\)</span></li>
</ul>
<p>has a closed-form solution.</p>
<p>Define</p>
<p><span class="math display">\[
A = \mathbf{1}^\top \Sigma^{-1} \mathbf{1}, \quad
B = \mathbf{1}^\top \Sigma^{-1} \boldsymbol{\mu}, \quad
C = \boldsymbol{\mu}^\top \Sigma^{-1} \boldsymbol{\mu}, \quad
D = AC - B^2.
\]</span></p>
<p>Then, for a target return <span class="math inline">\(r\)</span>, the
minimum-variance weights are</p>
<p><span class="math display">\[
\mathbf{w}(r) = \Sigma^{-1} \left[
\frac{C - Br}{D} \mathbf{1} + \frac{Ar - B}{D} \boldsymbol{\mu}
\right].
\]</span></p>
<p>This formula <strong>can produce negative weights</strong>,
i.e.¬†short positions.</p>
<hr />
<h2 id="long-only-frontier-practical-portfolios">4. Long-Only Frontier
(Practical Portfolios)</h2>
<p>Real-world portfolios are often <strong>long-only</strong>:</p>
<ul>
<li><span class="math inline">\(w_i \ge 0\)</span> for all <span
class="math inline">\(i\)</span>,</li>
<li><span class="math inline">\(\sum_i w_i = 1\)</span>.</li>
</ul>
<p>Because of these inequality constraints, the neat closed-form above
no longer applies. A practical approach:</p>
<ol type="1">
<li>Randomly generate many long-only weight vectors <span
class="math inline">\(\mathbf{w} \ge 0\)</span> with <span
class="math inline">\(\sum_i w_i = 1\)</span>.</li>
<li>For each, compute <span class="math display">\[
\mu_p = \mathbf{w}^\top \boldsymbol{\mu}, \qquad
\sigma_p = \sqrt{\mathbf{w}^\top \Sigma \mathbf{w}}.
\]</span></li>
<li>Keep only the <strong>Pareto-efficient</strong> portfolios.</li>
</ol>
<p>The upper envelope of these points is the <strong>practical
(long-only) efficient frontier</strong>.</p>
<hr />
<h2 id="sharpe-ratio-and-the-tangent-portfolio">5. Sharpe Ratio and the
Tangent Portfolio</h2>
<p>To compare portfolios with different risk levels, we use the
<strong>Sharpe ratio</strong>:</p>
<p><span class="math display">\[
S = \frac{E[R_p] - R_f}{\sigma_p}
\]</span></p>
<p>where <span class="math inline">\(R_f\)</span> is the
<strong>risk-free rate</strong>.</p>
<ul>
<li>Higher <span class="math inline">\(S\)</span> = more return per unit
of risk.</li>
<li>The frontier portfolio with the highest <span
class="math inline">\(S\)</span> is the <strong>tangent
portfolio</strong> (when a risk-free asset exists).</li>
</ul>
<hr />
<h2 id="rolling-10-year-analysis">6. Rolling 10-Year Analysis</h2>
<p>Historical estimates of <span
class="math inline">\(\boldsymbol{\mu}\)</span> and <span
class="math inline">\(\Sigma\)</span> <strong>change over time</strong>.
To see how sensitive an optimizer is, we do a
<strong>rolling-window</strong> study.</p>
<p>For each month <span class="math inline">\(t\)</span>:</p>
<ol type="1">
<li>Take the past 120 months (10 years) of returns.</li>
<li>Estimate <span class="math display">\[
\boldsymbol{\mu}_t = 12 \cdot \overline{r}_{t-119:t}, \qquad
\Sigma_t = 12 \cdot \text{Cov}_{t-119:t}.
\]</span></li>
<li>Build a long-only frontier using <span
class="math inline">\((\boldsymbol{\mu}_t, \Sigma_t)\)</span>.</li>
<li>Either pick:
<ul>
<li>the portfolio whose return is closest to a target <span
class="math inline">\(r^\*\)</span>, <strong>or</strong></li>
<li>the max-Sharpe portfolio for that window.</li>
</ul></li>
<li>Store the weights and diagnostics.</li>
</ol>
<p>This gives a time series of ‚Äúwhat the optimizer would have told me at
that time.‚Äù</p>
<hr />
<h2 id="interpreting-rolling-results">7. Interpreting Rolling
Results</h2>
<table>
<colgroup>
<col style="width: 24%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="header">
<th>Observation</th>
<th>Interpretation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Weights are stable</td>
<td>Inputs/structure are robust ‚Üí static allocation is reasonable</td>
</tr>
<tr class="even">
<td>Weights jump around</td>
<td>Optimizer is sensitive ‚Üí add constraints / wider bands</td>
</tr>
<tr class="odd">
<td>Sharpe drifts</td>
<td>Market regime changes (rates, vol, correlations)</td>
</tr>
</tbody>
</table>
<p>The rolling data helps you build a <strong>robust</strong> policy
allocation, not chase every month‚Äôs ‚Äúoptimal‚Äù weights.</p>
<hr />
<h2 id="building-a-policy-allocation">8. Building a Policy
Allocation</h2>
<p>Let the rolling exercise give you <span
class="math inline">\(T\)</span> sets of optimal weights:</p>
<p><span class="math display">\[
\mathbf{w}^{(1)}, \mathbf{w}^{(2)}, \dots, \mathbf{w}^{(T)}.
\]</span></p>
<p>For asset <span class="math inline">\(i\)</span>, take the median
across all windows:</p>
<p><span class="math display">\[
\tilde{w}_i = \text{median}\bigl(w_i^{(1)}, \dots, w_i^{(T)}\bigr).
\]</span></p>
<p>These medians may not sum to 1, so normalize:</p>
<p><span class="math display">\[
w_i^{(\text{policy})} = \frac{\tilde{w}_i}{\sum_j \tilde{w}_j}.
\]</span></p>
<p>This is your <strong>policy portfolio</strong> ‚Äî the center of
gravity of historical optimal allocations.</p>
<hr />
<h2 id="defining-allocation-bands">9. Defining Allocation Bands</h2>
<p>To avoid over-trading, define a tolerance around each policy
weight:</p>
<p><span class="math display">\[
\text{Band}_i = \bigl[\, w_i^{(\text{policy})} - \delta,\;
w_i^{(\text{policy})} + \delta \,\bigr]
\]</span></p>
<p>where <span class="math inline">\(\delta\)</span> is often
<strong>0.05</strong> (i.e.¬†¬±5 percentage points).</p>
<p><strong>Example</strong></p>
<table>
<thead>
<tr class="header">
<th>Asset</th>
<th>Policy</th>
<th>Band</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>US Stock</td>
<td>0.40</td>
<td>0.35‚Äì0.45</td>
</tr>
<tr class="even">
<td>Intl Stock</td>
<td>0.20</td>
<td>0.15‚Äì0.25</td>
</tr>
<tr class="odd">
<td>US Bond</td>
<td>0.30</td>
<td>0.25‚Äì0.35</td>
</tr>
<tr class="even">
<td>Intl Bond</td>
<td>0.10</td>
<td>0.05‚Äì0.15</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="rebalancing-strategy">10. Rebalancing Strategy</h2>
<h3 id="calendar-based">10.1 Calendar-Based</h3>
<ul>
<li>Rebalance on a fixed schedule (e.g.¬†annually).</li>
<li>Simple, but may trade unnecessarily.</li>
</ul>
<h3 id="threshold-based">10.2 Threshold-Based</h3>
<ul>
<li>Check periodically.</li>
<li>Rebalance <strong>only</strong> if a weight is
<strong>outside</strong> its band.</li>
<li>Usually more cost- and tax-efficient.</li>
</ul>
<h3 id="hybrid">10.3 Hybrid</h3>
<ul>
<li>Check monthly/quarterly.</li>
<li>Act only if out of band.</li>
</ul>
<hr />
<h2 id="decision-procedure">11. Decision Procedure</h2>
<p>Let <span class="math inline">\(\mathbf{w}_{\text{current}}\)</span>
be your actual portfolio weights.</p>
<ol type="1">
<li>For each asset <span class="math inline">\(i\)</span>, get <span
class="math inline">\(w_i^{(\text{policy})}\)</span> and its band.</li>
<li>If <span class="math display">\[
w_{i,\text{current}} &lt; w_i^{(\text{policy})} - \delta
\quad \text{or} \quad
w_{i,\text{current}} &gt; w_i^{(\text{policy})} + \delta,
\]</span> then <strong>rebalance asset <span
class="math inline">\(i\)</span></strong>.</li>
<li>Trade back toward the policy weight (or the midpoint of the
band).</li>
</ol>
<hr />
<h2 id="interpreting-volatility">12. Interpreting Volatility</h2>
<p>If a portfolio has <span class="math inline">\(\mu_p = 8\%\)</span>
and <span class="math inline">\(\sigma_p = 7\%\)</span>, then (roughly,
assuming normality):</p>
<ul>
<li>About 68% of years fall in <span class="math display">\[
8\% \pm 7\% \quad \Rightarrow \quad 1\% \text{ to } 15\%
\]</span></li>
<li>About 95% of years fall in <span class="math display">\[
8\% \pm 14\% \quad \Rightarrow \quad -6\% \text{ to } 22\%
\]</span></li>
</ul>
<p>Volatility = typical fluctuation around the mean, not guaranteed
bounds.</p>
<hr />
<h2 id="risk-free-rate">13. Risk-Free Rate</h2>
<p>Used in Sharpe:</p>
<ul>
<li><span class="math inline">\(R_f\)</span> is usually a Treasury yield
(3m T-bill, 1y, etc.).</li>
<li>Higher <span class="math inline">\(R_f\)</span> makes it harder for
risky portfolios to look good on a Sharpe basis.</li>
</ul>
<hr />
<h2 id="handling-median-normalization">14. Handling Median
Normalization</h2>
<p>If <span class="math display">\[
\sum_i \tilde{w}_i \neq 1,
\]</span> then normalize:</p>
<p><span class="math display">\[
w_i^{(\text{normalized})} = \frac{\tilde{w}_i}{\sum_j \tilde{w}_j}.
\]</span></p>
<p>Now weights sum to 1 and you can define bands.</p>
<hr />
<h2 id="summary-from-math-to-action">15. Summary: From Math to
Action</h2>
<table>
<thead>
<tr class="header">
<th>Step</th>
<th>Concept</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Get prices, make returns</td>
<td>Monthly return series</td>
</tr>
<tr class="even">
<td>2</td>
<td>Estimate <span class="math inline">\(\mu\)</span>, <span
class="math inline">\(\Sigma\)</span></td>
<td>Inputs for optimization</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Build frontiers</td>
<td>Risk‚Äìreturn trade-off</td>
</tr>
<tr class="even">
<td>4</td>
<td>Rolling 10y analysis</td>
<td>Stability over time</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Take medians, normalize</td>
<td>Policy allocation</td>
</tr>
<tr class="even">
<td>6</td>
<td>Add bands</td>
<td>Rebalancing tolerance</td>
</tr>
<tr class="odd">
<td>7</td>
<td>Compare to current weights</td>
<td>Rebalance signals</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="example-interpretation">16. Example Interpretation</h2>
<p>If rolling results over 30 years suggest:</p>
<table>
<thead>
<tr class="header">
<th>Asset</th>
<th>Median</th>
<th>25‚Äì75% Range</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>US Stock</td>
<td>41%</td>
<td>35‚Äì48%</td>
</tr>
<tr class="even">
<td>Intl Stock</td>
<td>18%</td>
<td>14‚Äì23%</td>
</tr>
<tr class="odd">
<td>US Bond</td>
<td>31%</td>
<td>27‚Äì36%</td>
</tr>
<tr class="even">
<td>Intl Bond</td>
<td>10%</td>
<td>6‚Äì13%</td>
</tr>
</tbody>
</table>
<p>then a policy of <strong>40/20/30/10</strong> with
<strong>¬±5%</strong> bands is a sensible, data-backed long-term mix.</p>
<hr />
<h2 id="key-principles">17. Key Principles</h2>
<ol type="1">
<li><strong>Optimization is fragile</strong> ‚Äî don‚Äôt chase tiny
differences.</li>
<li><strong>Diversification is robust</strong> ‚Äî own multiple
assets.</li>
<li><strong>Discipline beats precision</strong> ‚Äî policy + bands &gt;
re-optimize monthly.</li>
<li><strong>Use models as maps, not oracles.</strong></li>
</ol>
<hr />
<h2 id="references">18. References</h2>
<ul>
<li>Markowitz, H. (1952). <em>Portfolio Selection</em>. <strong>Journal
of Finance</strong>.<br />
</li>
<li>Sharpe, W. F. (1966). <em>Mutual Fund Performance</em>.
<strong>Journal of Business</strong>.</li>
</ul>
</body>
</html>
